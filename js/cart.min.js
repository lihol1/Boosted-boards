"use strict";function renderCart(){cartItems.innerHTML="",totalRow.innerHTML="",cart.forEach(t=>{let e=t.salePrice||t.price,r=`\n                        <div class="cart__item" id="${t.id}">\n                            <div class="cart__image">\n                                <img src="${t.srcImg}" alt="${t.title}">                            \n                            </div>\n                            <div class="cart__desc">${t.title}</div>\n                            <div class="cart__quantity">\n                                <form class="cart__form-quantity">\n                                    <input class="cart__num" type="number" min ="1" value="${t.qty}">\n                                </form>\n                                <div class="cart__btns">\n                                    <button type="button" class="cart__button plus" data-sign="plus">\n                                        <img src="./img/icons/icon-up.svg" alt="Arrow up">\n                                    </button>\n                                    <button type="button" class="cart__button minus" data-sign="minus">\n                                        <img src="./img/icons/icon-down.svg" alt="Arrow down">\n                                    </button>\n                                </div>\n                            </div>\n                            <div class="cart__sum-block">\n                                <div>US $<span class="cart__sum">${(t.qty*e).toFixed(2)}</span></div>\n                            </div>\n                            <div class="cart__remove">\n                                <img src="./img/icons/x.svg" alt="Remove icon">\n                            </div>\n                        </div>\n        `;cartItems.innerHTML+=r,setBtnListener()});let t=` \n            <div class="cart__total-text">Subtotal</div>\n            <div class="cart__total-sum">US $${getTotal()}</div>\n        `;totalRow.innerHTML+=t}function setBtnListener(){Array.from(btnsQty).forEach(t=>{t.addEventListener("click",()=>{t.classList.contains("plus")?addProd(t.closest(".cart__item").id):reduceProd(t.closest(".cart__item").id)})}),Array.from(crossIcons).forEach(t=>{t.addEventListener("click",()=>{removeProd(t.closest(".cart__item").id)})}),Array.from(cartInputs).forEach(t=>{t.addEventListener("blur",e=>{getSum(t.closest(".cart__item").id,e)}),t.addEventListener("keydown",e=>{e.preventDefault(),"Enter"===e.key&&getSum(t.closest(".cart__item").id,e)})})}function getSum(t,e){cart.forEach(r=>{r.id===t&&(r.qty=e.target.value)}),saveCart(),renderCart()}function addProd(t){cart.forEach(e=>{e.id===t&&e.qty++}),renderCart()}function reduceProd(t){cart.forEach(e=>{e.id===t&&e.qty>1&&e.qty--}),renderCart()}function removeProd(t){let e=t.replace(/[^a-z]/g,"");cart.forEach(e=>{e.id===t&&(cart=cart.filter(e=>e.id!==t),saveCart())});let r=JSON.parse(localStorage.getItem(`${e}-iconState`));r&&r.forEach(a=>{a.id===t&&(a.state="prods__cart-icon",localStorage.setItem(`${e}-iconState`,JSON.stringify(r)))}),getcartNum(),0==cart.length&&(cartBlock.classList.add("hidden"),cartEmpty.classList.remove("hidden")),renderCart()}function getTotal(){let t=0;return Array.from(cartSums).forEach(e=>{t+=parseFloat(e.textContent)}),t.toFixed(2)}const cartBlock=document.querySelector(".cart__block"),cartEmpty=document.querySelector(".cart__empty"),cartItems=document.querySelector(".cart__items-row"),totalRow=document.querySelector(".cart__total-row"),btnsQty=document.getElementsByClassName("cart__button"),crossIcons=document.getElementsByClassName("cart__remove"),cartSums=document.getElementsByClassName("cart__sum"),cartInputs=document.getElementsByClassName("cart__num");cart.length>0&&(cartBlock.classList.remove("hidden"),cartEmpty.classList.add("hidden")),renderCart();